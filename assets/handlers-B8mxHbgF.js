import{a as d,i as C}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();d.defaults.baseURL="https://dummyjson.com/products";async function _(){const{data:t}=await d.get("/category-list");return t}async function w(t,e=1){const{data:o}=await d.get(`/category/${t}?limit=12&skip=${(e-1)*12}`);return o}async function p(t=1){const{data:e}=await d.get(`?limit=12&skip=${(t-1)*12}`);return e}async function m(t){const{data:e}=await d.get(`/${t}`);return e}async function S(t,e=1){const{data:o}=await d.get(`/search?q=${t}&limit=12&skip=${(e-1)*12}`);return o}const s={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),notFound:document.querySelector(".not-found"),searchFormBtnClear:document.querySelector(".search-form__btn-clear"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),cartCount:document.querySelector("span[data-cart-count]"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist"),wishlistCount:document.querySelector("span[data-wishlist-count]"),cartSummaryItem:document.querySelector("span[data-count]"),cartSummaryPrice:document.querySelector("span[data-price]"),cartSummaryBtn:document.querySelector(".cart-summary__btn")};function g(t,e){let o=a(t)||[];Array.isArray(o)||(o=[o]),o.push(e),localStorage.setItem(t,JSON.stringify(o))}function a(t){const e=localStorage.getItem(t);return e?JSON.parse(e):null}function f(t,e){let o=a(t)||[];Array.isArray(o)||(o=[o]),o=o.filter(n=>n!==e),localStorage.setItem(t,JSON.stringify(o)),o.length}function L(t){const o=["All",...t].map(n=>`
        <li class="categories__item">
            <button class="categories__btn" type="button">${n}</button>
        </li>
        `).join("");s.categoriesList.insertAdjacentHTML("beforeend",o)}function l(t){const e=t.map(({id:o,title:n,thumbnail:r,brand:c,category:i,price:y})=>`
         <li class="products__item" data-id="${o}">
    <img class="products__image" src="${r}" alt="${n}"/>
    <p class="products__title">${n}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${c}</span></p>
    <p class="products__category">Category: ${i}</p>
    <p class="products__price">Price: ${y}$</p>
 </li>
          `).join("");s.productsList.insertAdjacentHTML("beforeend",e)}function b(t){s.modalProduct.id=t.id;const e=`<img class="modal-product__img" src="${t.images[0]}" alt="" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${t.tags.map(o=>`<li class="modal-product__tag">${o}</li>`).join("")}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy}</p>
        <p class="modal-product__price">Price: ${t.price} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;s.modalProduct.innerHTML=e,console.log(t)}function u(){s.productsList.innerHTML=""}async function x(){const t=a("cart");if(t){s.cartCount.textContent=t.length,s.cartSummaryItem.textContent=t.length;const o=(await Promise.all(t.map(n=>m(n)))).reduce((n,r)=>n+r.price,0).toFixed(2);s.cartSummaryPrice.textContent=o}else s.cartCount.textContent=0}async function $(){try{const o=await _();L(o);const{products:n}=await p();l(n)}catch(o){console.log(o)}const t=a("cart");t?s.cartCount.textContent=t.length:s.cartCount.textContent=0;const e=a("wishlist");e?s.wishlistCount.textContent=e.length:s.wishlistCount.textContent=0}async function q(t){try{if(t.target.tagName!=="BUTTON")return;const e=t.target.textContent,o=t.target,n=document.querySelector(".not-found");if(console.log(e),e==="All"){const{products:c}=await p();console.log("all",c),l(c);return}const{products:r}=await w(e);if(console.log(r.length),r.length===0){console.log("notFound"),n.classList.add("not-found--visible");return}o.classList.add("categories__btn--active"),console.log(r),console.log(o),l(r)}catch(e){console.log(e)}}async function B(t){if(!t.target.closest(".products__item"))return;console.log(t.target.closest(".products__item")),console.log(t.target.closest(".products__item"));const e=t.target.closest(".products__item").dataset.id,o=await a("cart"),n=await a("wishlist");console.log(o),o&&o.includes(e)?s.addToCartBtn.textContent="Remove from cart":s.addToCartBtn.textContent="Add to cart",n&&n.includes(e)?s.addToWishlistBtn.textContent="Remove from Wishlist":s.addToWishlistBtn.textContent="Add to Wishlist";const r=await m(e);s.modal.classList.add("modal--is-open"),b(r),document.addEventListener("keydown",h)}function T(){s.modal.classList.remove("modal--is-open"),document.removeEventListener("keydown",h)}function A(t){t.target===t.currentTarget&&s.modal.classList.remove("modal--is-open")}function h(t){t.code==="Escape"&&s.modal.classList.remove("modal--is-open")}async function v(t){t.preventDefault(),console.log(t.target.elements.searchValue.value);const e=t.target.elements.searchValue.value.trim();if(e===""){C.warning({title:"Warning",message:"Please enter a search query",position:"topRight",timeout:3e3}),console.log("Please enter a search query");return}const{products:o}=await S(e);if(console.log(o),o.length===0){u(),s.notFound.classList.add("not-found--visible");return}u(),l(o)}async function F(){s.searchForm.elements.searchValue.value="",s.notFound.classList.contains("not-found--visible")&&s.notFound.classList.remove("not-found--visible"),u();const t=await p();l(t.products)}function I(t){const e=t.target.closest(".modal__content").querySelector(".modal-product").id;if(t.target.textContent==="Remove from cart"){f("cart",e),t.target.textContent="Add to cart";const n=a("cart");if(window.location.pathname==="/cart.html")if(console.log("cart lenght",n.length),n.length===0)s.productsList.innerHTML="<p>Cart is empty</p>";else{const r=n.map(async c=>await m(c));Promise.all(r).then(c=>{u(),l(c),x()})}n.length===0?s.cartCount.textContent=0:s.cartCount.textContent=n.length}else g("cart",e),t.target.textContent="Remove from cart";const o=a("cart");s.cartCount.textContent=o.length}function O(t){const e=t.target.closest(".modal__content").querySelector(".modal-product").id;if(t.target.textContent==="Remove from Wishlist"){f("wishlist",e),t.target.textContent="Add to Wishlist";const n=a("wishlist");if(window.location.pathname==="/wishlist.html")if(console.log("wishlist lenght",n.length),n.length===0)s.productsList.innerHTML="<p>Wishlist is empty</p>";else{const r=n.map(async c=>await m(c));Promise.all(r).then(c=>{u(),l(c)})}n.length===0?s.wishlistCount.textContent=0:s.wishlistCount.textContent=n.length}else g("wishlist",e),t.target.textContent="Remove from Wishlist";const o=a("wishlist");s.wishlistCount.textContent=o.length}export{T as a,A as b,v as c,F as d,I as e,O as f,a as g,m as h,l as i,$ as j,q as k,x as l,u as m,B as o,s as r};
//# sourceMappingURL=handlers-B8mxHbgF.js.map
