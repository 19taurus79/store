{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from \"izitoast\";\nimport { onAddToCartBtnClick, onAddToWishlistBtnClick, onModalCloseBtnClick, onOverlayClick, onProductClick, onSearchFormBtnClearClick, onSearchFormSubmit } from \"./js/handlers\";\nimport { getProductById } from \"./js/products-api\";\nimport { refs } from \"./js/refs\";\nimport { clearProductsList, renderAsideCart, renderProductById, renderProducts } from \"./js/render-function\";\nimport { getFromStorage } from \"./js/storage\";\n\ndocument.addEventListener('DOMContentLoaded', onDOMContentLoaded);\nrefs.productsList.addEventListener('click', (onProductClick));\nrefs.modalCloseBtn.addEventListener('click', onModalCloseBtnClick);\nrefs.modal.addEventListener('click', onOverlayClick);\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\nrefs.searchFormBtnClear.addEventListener('click', onSearchFormBtnClearClick);\nrefs.addToCartBtn.addEventListener('click', onAddToCartBtnClick);\nrefs.addToWishlistBtn.addEventListener('click', onAddToWishlistBtnClick);\nrefs.cartSummaryBtn.addEventListener('click', onCartSummaryBtnClick);\n\nexport async function onDOMContentLoaded() {\n  \n  const cart = getFromStorage('cart');\n  if (cart) {\n    refs.cartCount.textContent = cart.length;\n    refs.cartSummaryItem.textContent = cart.length;\n    // const products = await Promise.all(cart.map(id => getProductById(id)));\n    // const totalPrice = products.reduce((acc, product) => acc + product.price, 0);\n    // refs.cartSummaryPrice.textContent = totalPrice;\n    renderAsideCart();\n  } else {\n    refs.cartCount.textContent = 0;\n  }\n  const wishlist = getFromStorage('wishlist');\n  if (wishlist) {\n    refs.wishlistCount.textContent = wishlist.length;\n  }\n  else {\n    refs.wishlistCount.textContent = 0;\n  }\n  try {\n    const cart = getFromStorage('cart');\n    console.log(\"cart\",cart);\n    \n    if (cart.length > 0) {\n        const products= cart.map(async (id) => {\n          const product = await getProductById(id);\n          return product;\n        });\n        Promise.all(products).then((products) => {\n          renderProducts(products);\n        });\n    //   const products = await getProductById(wishlist);\n    //   console.log(\"whishlist\",products);\n      \n    //   renderProducts(products);\n    } else {\n      refs.productsList.innerHTML = '<p>Wishlist is empty</p>';\n\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function onCartSummaryBtnClick(event) {\n    // const cart = getFromStorage('cart');\n    // console.log('summary',cart);\n    localStorage.setItem('cart', JSON.stringify([]));\n    clearProductsList();\n    renderAsideCart();\n    iziToast.success({\n      title: 'Success',\n      message: 'You have successfully purchased all products',\n      position: 'center',\n      class: 'my-custom-toast',\n      \n    });\n}\n"],"names":["onDOMContentLoaded","refs","onProductClick","onModalCloseBtnClick","onOverlayClick","onSearchFormSubmit","onSearchFormBtnClearClick","onAddToCartBtnClick","onAddToWishlistBtnClick","onCartSummaryBtnClick","cart","getFromStorage","renderAsideCart","wishlist","products","id","getProductById","renderProducts","error","event","clearProductsList","iziToast"],"mappings":"sLASA,SAAS,iBAAiB,mBAAoBA,CAAkB,EAChEC,EAAK,aAAa,iBAAiB,QAAUC,CAAc,EAC3DD,EAAK,cAAc,iBAAiB,QAASE,CAAoB,EACjEF,EAAK,MAAM,iBAAiB,QAASG,CAAc,EACnDH,EAAK,WAAW,iBAAiB,SAAUI,CAAkB,EAC7DJ,EAAK,mBAAmB,iBAAiB,QAASK,CAAyB,EAC3EL,EAAK,aAAa,iBAAiB,QAASM,CAAmB,EAC/DN,EAAK,iBAAiB,iBAAiB,QAASO,CAAuB,EACvEP,EAAK,eAAe,iBAAiB,QAASQ,CAAqB,EAE5D,eAAeT,GAAqB,CAEzC,MAAMU,EAAOC,EAAe,MAAM,EAC9BD,GACFT,EAAK,UAAU,YAAcS,EAAK,OAClCT,EAAK,gBAAgB,YAAcS,EAAK,OAIxCE,KAEAX,EAAK,UAAU,YAAc,EAE/B,MAAMY,EAAWF,EAAe,UAAU,EACtCE,EACFZ,EAAK,cAAc,YAAcY,EAAS,OAG1CZ,EAAK,cAAc,YAAc,EAEnC,GAAI,CACF,MAAMS,EAAOC,EAAe,MAAM,EAGlC,GAFA,QAAQ,IAAI,OAAOD,CAAI,EAEnBA,EAAK,OAAS,EAAG,CACjB,MAAMI,EAAUJ,EAAK,IAAI,MAAOK,GACd,MAAMC,EAAeD,CAAE,CAExC,EACD,QAAQ,IAAID,CAAQ,EAAE,KAAMA,GAAa,CACvCG,EAAeH,CAAQ,CACjC,CAAS,CAKT,MACMb,EAAK,aAAa,UAAY,0BAGjC,OAAQiB,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEO,SAAST,EAAsBU,EAAO,CAGzC,aAAa,QAAQ,OAAQ,KAAK,UAAU,CAAE,CAAA,CAAC,EAC/CC,IACAR,IACAS,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,+CACT,SAAU,SACV,MAAO,iBAEb,CAAK,CACL"}