{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["// Функції для роботи з бекендом\n\nimport axios from 'axios';\n// Добавляємо базовий URL для всіх запитів\naxios.defaults.baseURL = 'https://dummyjson.com/products';\n// Функція для отримання категорій\nexport async function getCategories() {\n  const { data } = await axios.get('/category-list');\n  return data;\n}\n// Функція для отримання продуктів за категорією\n// Використовується пагінація для отримання 12 продуктів за раз\nexport async function getProductsByCategory(category, page = 1) {\n  const { data } = await axios.get(\n    `/category/${category}?limit=12&skip=${(page - 1) * 12}`\n  );\n  return data;\n}\n// Функція для отримання всіх продуктів\n// Використовується пагінація для отримання 12 продуктів за раз\nexport async function getProducts(page = 1) {\n  const { data } = await axios.get(`?limit=12&skip=${(page - 1) * 12}`);\n  return data;\n}\n// Функція для отримання продукту за ID\n// Використовується пагінація для отримання 12 продуктів за раз\nexport async function getProductById(id) {\n  const { data } = await axios.get(`/${id}`);\n  return data;\n}\n// Функція для отримання продуктів за запитом\n// Використовується пагінація для отримання 12 продуктів за раз\nexport async function getProductsByQuery(query, page = 1) {\n  const { data } = await axios.get(\n    `/search?q=${query}&limit=12&skip=${(page - 1) * 12}`\n  );\n  return data;\n}\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  categoriesList: document.querySelector('.categories'),\n  productsList: document.querySelector('.products'),\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n};\n","//Функцію для створення, рендеру або видалення розмітки\nimport { refs } from './refs';\n\n\nexport function renderCategories(categories) {\n  const categoriesAll = ['All', ...categories];\n  const markup = categoriesAll\n    .map(\n      category => `\n        <li class=\"categories__item\">\n            <button class=\"categories__btn\" type=\"button\">${category}</button>\n        </li>\n        `\n    )\n    .join('');\n\n  refs.categoriesList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function renderProducts(products) {\n  const markup = products\n    .map(\n      ({ id, title, thumbnail, brand, category, price }) => `\n         <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>\n          `\n    )\n    .join('');\n\n  refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function renderProductById(product){\nconst markup = `<img class=\"modal-product__img\" src=\"${product.images[0]}\" alt=\"\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${product.title}</p>\n        <ul class=\"modal-product__tags\">${product.tags.map(tag => `<li class=\"modal-product__tag\">${tag}</li>`).join('')}</ul>\n        <p class=\"modal-product__description\">${product.description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${product.shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${product.returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${product.price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`\nrefs.modalProduct.innerHTML = markup;\n}","// Функції, які передаються колбеками в addEventListners\nimport { getCategories, getProductById, getProducts, getProductsByCategory } from './products-api';\nimport { refs } from './refs';\nimport { renderCategories, renderProductById, renderProducts } from './render-function';\n\n// Функція викликається при завантаженні сторінки\nexport async function onDOMContentLoaded() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n\n    const { products } = await getProducts();\n    renderProducts(products);\n  } catch (error) {\n    console.log(error);\n  }\n}\n// Функція викликається при кліку на категорію\nexport async function onCategoryClick(event) {\n  try {\n    if (event.target.tagName !== 'BUTTON') {\n      return;   \n    }\n    const category = event.target.textContent;\n    const categoryBtn = event.target\n    const notFound = document.querySelector('.not-found');\n    console.log(category)\n    if (category === 'All') {\n      const { products } = await getProducts();\n      console.log('all',products);\n      \n      renderProducts(products);\n      return;\n    }\n    const { products } = await getProductsByCategory(category);\n    console.log(products.length);\n    \n    if (products.length === 0) {\n      console.log('notFound');\n      notFound.classList.add('not-found--visible');\n      return;\n     };\n    categoryBtn.classList.add('categories__btn--active');\n    //TODO: remove\n    console.log(products);\n    console.log(categoryBtn);\n    \n    renderProducts(products);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function onProductClick(event) {\n// console.log(event.target.closest('.products__item').classList.contains('products__item'));\n// console.log(event.target.closest('.products__item').classList.contains('products__item'));\n  if (!event.target.closest('.products__item')) {\n    return;\n  }console.log(event.target.closest('.products__item'));\n\nconsole.log(event.target.closest('.products__item'));\n  const productId = event.target.closest('.products__item').dataset.id;\n  const product = await getProductById(productId);\n  refs.modal.classList.add('modal--is-open');\n  renderProductById(product);\n\n  // Добавляем слушатель для клавиши Escape\n  document.addEventListener('keydown', onEscKeyPress);\n}\n\nexport function onModalCloseBtnClick() {\n  refs.modal.classList.remove('modal--is-open');\n\n  // Удаляем слушатель для клавиши Escape\n  document.removeEventListener('keydown', onEscKeyPress);\n}\n\nexport function onOverlayClick(event) {\n  if (event.target === event.currentTarget) {\n    refs.modal.classList.remove('modal--is-open');\n  }\n}\nexport function onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    refs.modal.classList.remove('modal--is-open');\n  }\n}","import { onCategoryClick, onDOMContentLoaded, onEscKeyPress, onModalCloseBtnClick, onOverlayClick, onProductClick } from './js/handlers';\nimport { refs } from './js/refs';\n\n//Логіка сторінки Home\ndocument.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n\nrefs.categoriesList.addEventListener('click', (onCategoryClick));\nrefs.productsList.addEventListener('click', (onProductClick));\nrefs.modalCloseBtn.addEventListener('click', onModalCloseBtnClick);\nrefs.modal.addEventListener('click', onOverlayClick);\n// document.addEventListener('keydown', onEscKeyPress);"],"names":["axios","getCategories","data","getProductsByCategory","category","page","getProducts","getProductById","id","refs","renderCategories","categories","markup","renderProducts","products","title","thumbnail","brand","price","renderProductById","product","tag","onDOMContentLoaded","error","onCategoryClick","event","categoryBtn","notFound","onProductClick","productId","onEscKeyPress","onModalCloseBtnClick","onOverlayClick"],"mappings":"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"}